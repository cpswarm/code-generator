<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml"
	xmlns:cpswarm="http://my.custom-actions.domain/cpswarm/CUSTOM"
	version="1.0" initial="SarBehavior" name="sar">
	
	<!-- ******************** SAR MAIN ******************** -->
<!-- 	<parallel id="SarThreads"> -->
	
		<!-- ******************** SAR BEHAVIOR ******************** -->
		<state id="SarBehavior">
			
			<parallel id="IdleThreads">
				<state id="Idle">
				</state>
				
				<state id="IdleEventMonitoring">
					<datamodel>
						<data id="invoke"><rosmonitor><topic>cpswarm/event/target_found</topic><msg>Bool</msg></rosmonitor>
						</data>
					</datamodel>
					<invoke type="ROS_MONITOR" />
				</state>
				
				<transition event="targetFound" target="MoveToTarget" />
			</parallel>
			
			
			<state id="MoveToTarget">
				<datamodel>
					<data id="invoke"><rosaction><name>cpswarm/cmd/moveto</name><action>GlobalMoveTo</action><goal type="slot"><var>latitude</var><var>longitude</var></goal></rosaction>
					</data>
				</datamodel>
				<invoke type="ROS_ACTION" />
			</state>

		</state>

		<!-- ******************** SAR EVENT MONITORING ******************** -->
<!-- 		<state id="SarEventMonitoring">
			<invoke type="ROS_MONITOR" />
		</state> -->
		
		<!-- <transition event="missionAbort" target="MissionAbort" />
		<transition event="emergencyEvent"
			target="EmergencyRoutine" /> -->

<!-- 	</parallel> -->

	<!-- ******************** MISSION ABORT ******************** -->
<!-- 	<state id="MissionAbort">

	</state> -->

	<!-- ******************** EMERGENCY ROUTINE ******************** -->
<!-- 	<state id="EmergencyRoutine">

	</state> -->

</scxml>